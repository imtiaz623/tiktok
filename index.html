<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Watick Video Earn Money</title>
  <style>
    * {
      box-sizing: border-box;
    }
    body {
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(to right, #111, #222);
      color: white;
      margin: 0;
      padding: 15px;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
    }
    h1 {
      color: #0ff;
      text-shadow: 0 0 5px #0ff;
      font-size: 1.5rem;
      margin: 10px 0;
      text-align: center;
    }
    .container {
      background: #1a1a1a;
      padding: 20px;
      border-radius: 16px;
      width: 100%;
      max-width: 500px;
      box-shadow: 0 0 20px rgba(0, 255, 255, 0.2);
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    button {
      padding: 12px;
      border: none;
      border-radius: 10px;
      background: #00ffff;
      color: #000;
      font-weight: bold;
      cursor: pointer;
      width: 100%;
      font-size: 1rem;
      transition: 0.3s ease;
      margin-bottom: 10px;
    }
    button:hover {
      background: #0ff6;
    }
    .hidden {
      display: none;
    }
    .balance-container {
      display: flex;
      align-items: center;
      gap: 10px;
      margin: 15px 0;
      width: 100%;
      justify-content: center;
    }
    .balance {
      font-size: 1rem;
      color: #0f0;
      font-weight: bold;
      text-align: center;
    }
    .withdraw-btn {
      background-color: #ff6f61;
      padding: 6px 12px;
      border-radius: 10px;
      color: #000;
      cursor: pointer;
      font-weight: bold;
      font-size: 0.8rem;
      white-space: nowrap;
      width: auto;
    }
    .video-list-container {
      width: 100%;
      margin-top: 15px;
    }
    .video-list-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
      gap: 10px;
    }
    .video-list-header .back-button {
      background-color: #ff6f61;
      padding: 6px 12px;
      border-radius: 10px;
      color: #000;
      cursor: pointer;
      font-weight: bold;
      font-size: 0.8rem;
      white-space: nowrap;
    }
    .video-list-header .search-bar {
      display: flex;
      align-items: center;
      flex-grow: 1;
    }
    .video-list-header .search-bar input {
      padding: 8px;
      border-radius: 10px;
      border: none;
      background-color: #333;
      color: white;
      width: 100%;
      font-size: 0.9rem;
    }
    .video-list-header .search-bar .search-icon {
      background-color: #00ffff;
      padding: 8px;
      border-radius: 10px;
      margin-left: 5px;
      cursor: pointer;
      font-size: 0.9rem;
    }
    .category-buttons {
      display: flex;
      flex-direction: column;
      width: 100%;
      gap: 10px;
    }
    .profile {
      display: flex;
      align-items: center;
      margin-bottom: 15px;
      width: 100%;
      position: relative;
    }
    .profile img {
      border-radius: 50%;
      width: 40px;
      height: 40px;
      margin-right: 10px;
      object-fit: cover;
    }
    .profile span {
      font-size: 1rem;
      color: #fff;
    }
    .add-link-form {
      width: 100%;
      margin-top: 15px;
    }
    .add-link-form input {
      width: 100%;
      padding: 10px;
      margin-bottom: 10px;
      border-radius: 10px;
      border: none;
      background-color: #333;
      color: white;
      font-size: 0.9rem;
    }
    .urdu-message {
      direction: rtl;
      text-align: right;
      padding: 20px;
      background-color: #1a1a1a;
      border-radius: 10px;
      margin-top: 20px;
      border: 1px solid #0ff;
    }
    .user-video-container {
      display: flex;
      flex-direction: column;
      width: 100%;
    }
    .delete-btn {
      background-color: #ff0000;
      padding: 4px;
      border-radius: 5px;
      color: white;
      font-size: 0.7rem;
      width: 60px;
      align-self: center;
      margin-top: -8px;
      margin-bottom: 5px;
    }
    .bonus-btn {
      position: absolute;
      right: 0;
      background: linear-gradient(145deg, #ffd700, #ff9900);
      color: #000;
      padding: 5px 10px;
      border-radius: 15px;
      font-size: 0.7rem;
      font-weight: bold;
      box-shadow: 0 3px 6px rgba(255, 215, 0, 0.4);
      animation: pulse 2s infinite;
      border: none;
      cursor: pointer;
    }
    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.05); }
      100% { transform: scale(1); }
    }

    @media (max-width: 400px) {
      .container {
        padding: 15px;
      }
      h1 {
        font-size: 1.3rem;
      }
      button, .add-link-form input {
        padding: 10px;
      }
      .profile img {
        width: 35px;
        height: 35px;
      }
    }
  </style>
</head>
<body>

  <div class="container">
    <h1>Watick Video Earn Money</h1>
    
    <!-- Profile Section -->
    <div id="profileSection" class="profile hidden">
      <img id="profileImage" src="" alt="Profile Image" />
      <span id="profileName">Welcome back, User!</span>
      <button id="bonusButton" class="bonus-btn hidden" onclick="showBonusMessage()">Bonus</button>
    </div>

    <!-- Profile Setup Form -->
    <div id="profileSetup">
      <h2>Set up your Profile</h2>
      <input type="text" id="nameInput" placeholder="Enter your name" />
      <input type="file" id="profilePicInput" accept="image/*" />
      <button onclick="saveProfile()">Save Profile</button>
    </div>

    <!-- Balance Display -->
    <div class="balance-container">
      <div id="balanceDisplay" class="balance">
        Balance: RS0
      </div>
      <button class="withdraw-btn" onclick="showWithdrawMessage()">Withdraw</button>
    </div>

    <!-- Withdraw Message (Hidden by default) -->
    <div id="withdrawMessage" class="urdu-message hidden">
      محترم صارف! یہ ایپ تیار ہو رہی ہے اور کچھ دنوں کے اندر آپ کو وٹھڈراؤ سسٹم مل جائے گا۔ وٹھڈراؤ JazzCash، EasyPaisa یا بینک اکاؤنٹ میں ہوگا۔ یہ ایپ بے روزگار بھائی بہنوں کے لیے ڈیزائن ہو رہی ہے۔ بہت جلد یہ ایپ بہت کچھ لے کر آئے گی۔ بس ویڈیو دیکھو، ارننگ کرو، اپنے TikTok ویڈیو کا لنک شامل کرو، اور فالوورز، ویوز، لائکس بڑھاؤ!
    </div>

    <!-- Bonus Message (Hidden by default) -->
    <div id="bonusMessage" class="urdu-message hidden">
      اپنی پروفائل مکمل کریں اور 20 روپے کا بونس حاصل کریں!<br>
      پروفائل مکمل کرنے کے لیے نام اور تصویر شامل کریں۔
    </div>

    <!-- Main Category Buttons -->
    <div id="mainCategoryButtons">
      <button onclick="openCategory('youtube')">YouTube</button>
      <button onclick="openCategory('instagram')">Instagram</button>
    </div>

    <!-- Category Content -->
    <div id="categoryContent" class="hidden">
      <div class="video-list-container">
        <div class="video-list-header">
          <button class="back-button" onclick="goBackToMain()">⬅ Back</button>
          <div class="search-bar">
            <input type="text" id="categorySearchInput" placeholder="Search videos..." oninput="filterCategoryVideos()" />
            <div class="search-icon">🔍</div>
          </div>
        </div>

        <div id="categoryButtons" class="category-buttons"></div>
      </div>

      <div class="add-link-form">
        <input type="url" id="categoryLink" placeholder="Add Your Video Link" />
        <input type="text" id="videoTitle" placeholder="Add Video Title" />
        <button onclick="addLink()">Add Video</button>
      </div>
    </div>
  </div>

  <script>
    // Load Data
    const savedName = localStorage.getItem('name');
    const savedImage = localStorage.getItem('profileImage');
    let balance = parseInt(localStorage.getItem('balance')) || 0;
    let currentCategory = "";
    let videosWatched = JSON.parse(localStorage.getItem('videosWatched')) || {};
    let userVideos = JSON.parse(localStorage.getItem('userVideos')) || {};
    let bonusClaimed = localStorage.getItem('bonusClaimed') === 'true';

    // Initialize
    window.onload = function() {
      updateProfile();
      updateBalanceDisplay();
      
      if (savedName && savedImage) {
        document.getElementById('profileSetup').classList.add('hidden');
        document.getElementById('profileSection').classList.remove('hidden');
      } else if (!bonusClaimed) {
        document.getElementById('bonusButton').classList.remove('hidden');
      }
    };

    function updateBalanceDisplay() {
      document.getElementById('balanceDisplay').textContent = `Balance: RS${balance}`;
      localStorage.setItem('balance', balance);
    }

    // Profile Functions
    function updateProfile() {
      const profileSection = document.getElementById('profileSection');
      const profileName = document.getElementById('profileName');
      const profileImage = document.getElementById('profileImage');
      
      if (savedName && savedImage) {
        profileName.textContent = `Welcome back, ${savedName}!`;
        profileImage.src = savedImage;
        profileSection.classList.remove('hidden');
      }
    }

    function saveProfile() {
      const name = document.getElementById('nameInput').value.trim();
      const profilePicInput = document.getElementById('profilePicInput').files[0];

      if (!name || !profilePicInput) {
        alert("Name aur Profile Picture dono dalo!");
        return;
      }

      const reader = new FileReader();
      reader.onload = function() {
        localStorage.setItem('name', name);
        localStorage.setItem('profileImage', reader.result);
        updateProfile();
        document.getElementById('profileSetup').classList.add('hidden');
        alert("Profile save ho gaya! 😊");
        
        // Add bonus if not claimed yet
        if (!bonusClaimed) {
          balance += 20;
          updateBalanceDisplay();
          bonusClaimed = true;
          localStorage.setItem('bonusClaimed', 'true');
          document.getElementById('bonusButton').classList.add('hidden');
          alert("Congratulations! RS20 bonus added to your account");
        }
      };
      reader.readAsDataURL(profilePicInput);
    }

    function showBonusMessage() {
      document.getElementById('bonusMessage').classList.remove('hidden');
    }

    // Withdraw Message Function
    function showWithdrawMessage() {
      const messageDiv = document.getElementById('withdrawMessage');
      messageDiv.classList.toggle('hidden');
      document.getElementById('bonusMessage').classList.add('hidden');
    }

    // Category Functions
    function openCategory(category) {
      currentCategory = category;
      document.getElementById('mainCategoryButtons').classList.add('hidden');
      document.getElementById('categoryContent').classList.remove('hidden');
      document.getElementById('withdrawMessage').classList.add('hidden');
      document.getElementById('bonusMessage').classList.add('hidden');
      loadCategoryVideos(category);
    }

    function goBackToMain() {
      document.getElementById('mainCategoryButtons').classList.remove('hidden');
      document.getElementById('categoryContent').classList.add('hidden');
    }

    function loadCategoryVideos(category) {
      const categoryButtons = document.getElementById('categoryButtons');
      categoryButtons.innerHTML = "";

      for (let i = 0; i < localStorage.length; i++) {
        const key = localStorage.key(i);
        if (key.startsWith(`${category}-`)) {
          const videoTitle = key.replace(`${category}-`, "");
          const videoLink = localStorage.getItem(key);

          const videoContainer = document.createElement('div');
          videoContainer.className = "user-video-container";

          const videoButton = document.createElement('button');
          videoButton.textContent = videoTitle;
          videoButton.className = "video-button";
          
          // Check if video was already watched
          if (!videosWatched[key]) {
            videoButton.onclick = function() {
              watchVideo(key);
              window.open(videoLink, '_blank');
            };
          } else {
            videoButton.onclick = function() {
              window.open(videoLink, '_blank');
            };
            videoButton.style.opacity = "0.7";
          }
          
          videoContainer.appendChild(videoButton);
          
          // Add delete button if this is user's video
          if (userVideos[key] && userVideos[key] === savedName) {
            const deleteBtn = document.createElement('button');
            deleteBtn.textContent = "Delete";
            deleteBtn.className = "delete-btn";
            deleteBtn.onclick = function(e) {
              e.stopPropagation();
              deleteVideo(key);
            };
            videoContainer.appendChild(deleteBtn);
          }
          
          categoryButtons.appendChild(videoContainer);
        }
      }
    }

    function watchVideo(videoKey) {
      if (!videosWatched[videoKey]) {
        // First time watching this video
        balance += 3;
        videosWatched[videoKey] = true;
        localStorage.setItem('videosWatched', JSON.stringify(videosWatched));
        updateBalanceDisplay();
        alert("Video watched! +RS3 added to your balance");
      }
    }

    function deleteVideo(videoKey) {
      if (confirm("Kya aap is video ko delete karna chahte hain?")) {
        localStorage.removeItem(videoKey);
        delete userVideos[videoKey];
        localStorage.setItem('userVideos', JSON.stringify(userVideos));
        loadCategoryVideos(currentCategory);
        alert("Video delete ho gaya!");
      }
    }

    function filterCategoryVideos() {
      const searchInput = document.getElementById('categorySearchInput').value.toLowerCase();
      const videoContainers = document.getElementById('categoryButtons').children;

      for (let container of videoContainers) {
        const button = container.querySelector('button.video-button');
        const buttonText = button.textContent.toLowerCase();
        container.style.display = buttonText.includes(searchInput) ? "flex" : "none";
      }
    }

    function addLink() {
      const link = document.getElementById('categoryLink').value;
      const title = document.getElementById('videoTitle').value;

      if (!link || !title) {
        alert("Link aur Title dono dalo!");
        return;
      }

      if (balance >= 10) {
        // Deduct RS10 for adding video
        balance -= 10;
        updateBalanceDisplay();

        const videoKey = `${currentCategory}-${title}`;
        // Save to localStorage
        localStorage.setItem(videoKey, link);
        
        // Mark as user's video
        userVideos[videoKey] = savedName;
        localStorage.setItem('userVideos', JSON.stringify(userVideos));
        
        // Add new button
        loadCategoryVideos(currentCategory);
        
        // Clear inputs
        document.getElementById('categoryLink').value = "";
        document.getElementById('videoTitle').value = "";
        
        alert("Video add ho gaya! RS10 apke balance se kat gaye.");
      } else {
        alert("Sorry! Aapka balance kam hai. Video dekhe aur balance zyada kare. Shukriya!");
      }
    }
  </script>
</body>
</html>